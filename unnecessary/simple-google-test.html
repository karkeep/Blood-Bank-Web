// simple-google-test.html
<!DOCTYPE html>
<html>
<head>
    <title>Google Auth Test - Blood Bank</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        button {
            background: #dc2626;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover {
            background: #b91c1c;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 6px;
            background: #f3f4f6;
        }
        .error {
            background: #fee2e2;
            color: #991b1b;
        }
        .success {
            background: #dcfce7;
            color: #166534;
        }
    </style>
</head>
<body>
    <h1>Google Authentication Test</h1>
    <p>This is a simple test to verify Google Sign-In is working with your Firebase project.</p>
    
    <button onclick="signInWithGoogle()">Sign In with Google</button>
    <button onclick="signOut()">Sign Out</button>
    
    <div id="status" class="status"></div>
    
    <script>
        // Your Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyDnvX0CZWeSWOP14lDRIofFXEZkoy2Nim8",
            authDomain: "blood-bank-f759d.firebaseapp.com",
            projectId: "blood-bank-f759d",
            databaseURL: "https://blood-bank-f759d-default-rtdb.asia-southeast1.firebasedatabase.app/",
            storageBucket: "blood-bank-f759d.appspot.com",
            messagingSenderId: "131654509538",
            appId: "1:131654509538:web:8724207409d99bc5f64fbb"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const provider = new firebase.auth.GoogleAuthProvider();
        
        // Status element
        const statusEl = document.getElementById('status');
        
        // Listen for auth state changes
        auth.onAuthStateChanged((user) => {
            if (user) {
                statusEl.className = 'status success';
                statusEl.innerHTML = `
                    <h3>‚úÖ Signed In Successfully!</h3>
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>Name:</strong> ${user.displayName || 'Not set'}</p>
                    <p><strong>UID:</strong> ${user.uid}</p>
                `;
            } else {
                statusEl.className = 'status';
                statusEl.innerHTML = '<p>Not signed in. Click the button above to sign in.</p>';
            }
        });
        
        // Sign in function
        async function signInWithGoogle() {
            try {
                statusEl.className = 'status';
                statusEl.innerHTML = '<p>üîÑ Opening Google sign-in...</p>';
                
                const result = await auth.signInWithPopup(provider);
                console.log('Success:', result);
            } catch (error) {
                console.error('Error:', error);
                statusEl.className = 'status error';
                statusEl.innerHTML = `
                    <h3>‚ùå Error</h3>
                    <p><strong>Code:</strong> ${error.code}</p>
                    <p><strong>Message:</strong> ${error.message}</p>
                    ${getErrorHelp(error.code)}
                `;
            }
        }
        
        // Sign out function
        async function signOut() {
            try {
                await auth.signOut();
                statusEl.className = 'status';
                statusEl.innerHTML = '<p>Signed out successfully.</p>';
            } catch (error) {
                console.error('Sign out error:', error);
            }
        }
        
        // Error help messages
        function getErrorHelp(errorCode) {
            const helps = {
                'auth/popup-blocked': '<p><strong>Fix:</strong> Allow popups in your browser for this site.</p>',
                'auth/operation-not-allowed': '<p><strong>Fix:</strong> Enable Google sign-in in Firebase Console ‚Üí Authentication ‚Üí Sign-in method.</p>',
                'auth/unauthorized-domain': '<p><strong>Fix:</strong> Add this domain to authorized domains in Firebase Console.</p>'
            };
            return helps[errorCode] || '';
        }
    </script>
</body>
</html>
